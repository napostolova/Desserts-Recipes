<div class="container">
<div  *ngIf="!recipe">Loading...</div>

<div class="edit-recipe" *ngIf="recipe">
    <div class="eit-header">
     <h3>Edit Recipe</h3>
    </div>

    <form #form="ngForm" (ngSubmit)="editRecipe(form)">
      <div class="mb-3">
        <label for="recipeTitle" class="form-label">Title</label>
        <input #titleInput="ngModel" type="text" name="title" class="form-control" id="recipeTitle" [ngModel]="recipe.title"
          ngModel required minlength="3">
   
      <ng-container *ngIf="titleInput.touched">
        <p *ngIf="titleInput.errors?.required" class="error">
          Recipe title is required!
        </p>
        <p *ngIf="titleInput.errors?.minlength" class="error">
          Recipe title must be at least 3 characters long.
        </p>
      </ng-container> 
      </div>

      <div class="mb-3">
        <label for="recipeProducts" class="form-label">Ingredients</label>
        <textarea #productsInput="ngModel" name="products" class="form-control" id="recipeProducts" [ngModel]="recipe.products"  rows="3" ngModel
          required minlength="10"></textarea>
        <ng-container *ngIf="productsInput.touched">
          <p *ngIf="productsInput.errors?.required" class="error">
            The field with your recipe's products is required.
          </p>
          <p *ngIf="productsInput.errors?.minlength" class="error">
            Recipe must be at least 10 characters long.
          </p>
        </ng-container>
      </div>

      <div class="mb-3">
        <label for="recipePreparation" class="form-label">Preparation</label>
        <textarea #preparationInput="ngModel" class="form-control" name="preparation" id="recipePreparation" [ngModel]="recipe.preparation" rows="3"
          ngModel required minlength="10"></textarea>
        <ng-container *ngIf="preparationInput.touched">
          <p *ngIf="preparationInput.errors?.required" class="error">
            The field with recipe preparation is required.
          </p>
          <p *ngIf="preparationInput.errors?.minlength" class="error">
            Recipe must be at least 10 characters long.
          </p>
        </ng-container>
      </div>

      <div class="mb-3">
        <label for="recipeImage" class="form-label">Image</label>
        <input #imageInput="ngModel" type="text" name="imageUrl" id="recipeImage" [ngModel]="recipe.imageUrl" class="form-control" ngModel required>
        <ng-container *ngIf="imageInput.touched">
          <p *ngIf="imageInput.errors?.required" class="error">
            The recipe image is required.
          </p>
        </ng-container>
      </div>

      <div class="new-recipe-buttons">
        <button type="submit" class="btn btn-primary">Edit</button>
        <button type="button" routerLink="/recipes" class="btn btn-outline-primary">Cancel</button>     
       </div>
    </form>
  </div> 